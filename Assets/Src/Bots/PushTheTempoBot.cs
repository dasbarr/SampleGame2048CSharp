using System.Linq;
using UnityEngine;

namespace SampleGame2048 {
    
    /// <summary>
    /// Simple bot that selects a random move from the available ones.
    /// </summary>
    public class PushTheTempoBot : IBot {
        
        //-------------------------------------------------------------
        // Nested
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Dependencies
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Class constants
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Class variables
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Class methods
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Constructor/finalizer
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Variables
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Properties
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Private properties serialized for Unity
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Events
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Public methods
        //-------------------------------------------------------------
        
        /// <inheritdoc />
        public Move? CalcNextMove(ReadOnlyArray2D<int> gameBoardState, ReadOnlyHashSet<Move> availableMoves) {
            var numAvailableMoves = availableMoves.Count;
            if (numAvailableMoves == 0)
                return null; // can't make a move

            var randomMoveIndex = Random.Range(0, numAvailableMoves);
            return availableMoves
                .Skip(randomMoveIndex)
                .First(); // always exists here
        }
        
        //-------------------------------------------------------------
        // Protected methods
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Private methods
        //-------------------------------------------------------------
        
        //-------------------------------------------------------------
        // Unity methods
        //-------------------------------------------------------------
    }
}
